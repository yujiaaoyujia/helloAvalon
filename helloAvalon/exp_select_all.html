<!DOCTYPE html>
<html>
<head lang = "en">
  <meta charset = "UTF-8">
  <title>select all</title>
  <script src="js/avalon.js"></script>
  <script>
    var model = avalon.define({
      $id: "test",
      data: [{checked: false},{checked: false},{checked: false}],
      allchecked: false,
      checkAll: function () {
        var bool = model.allchecked = this.checked;
        model.data.forEach(function(el){
          el.checked = bool;
        });
      },
      checkOne: function(){
        if(!this.checked){
          model.allchecked = false;
        }else{
          model.allchecked = model.data.every(function(el){
            return el.checked;
          });
        }
      }
    });
  </script>
</head>
<body>
  <table ms-controller="test" border="1">
    <tr>
      <td><input type = "checkbox" ms-duplex-checked="allchecked" data-duplex-changed="checkAll"/>全选</td>
    </tr>
    <tr ms-repeat="data">
      <td><input type = "checkbox" ms-duplex-checked="el.checked" data-duplex-changed="checkOne"/>xxxxxxxxxxxx</td>
    </tr>
  </table>
</body>
</html>