<!DOCTYPE html>
<html>
<head lang = "en">
  <meta charset = "UTF-8">
  <title></title>
  <script src="js/avalon.js"></script>
  <script>
    var model = avalon.define({
      $id: "test",
      array: ["葡萄", "椰子", "火龙果", "橙子"],
      changeArray: function(status){
        console.log(this);
        console.log(status);
      },
      data:{
        aaa: 1111,
        bbb: 2222,
        ccc: 3333,
        ddd: 4444
      },
      changeData: function(status){
        console.log(this);
        console.log(status);
      },
      keys: function(){
        return ["ccc","ddd","aaa","bbb"];
      },
      array2: ["北京","上海","广州","重庆"],
      deleteArrayEl: function(status){
        console.log(this);
        console.log(status);
      }
    });
    setTimeout(function () {
      model.array.push('香蕉');
    }, 2000);
    setTimeout(function () {
      model.array.set(0, '葡萄干');
    }, 4000);
    setTimeout(function () {
      model.array.pop();
    }, 6000);
    setTimeout(function () {
      model.array.reverse();
    }, 8000);
    setTimeout(function () {
      model.array.removeAll();
    }, 10000);
    setTimeout(function(){
      model.data = {
        aaa: 5,
        bbb: 6,
        ccc: 7,
        ddd: 8
      }
    }, 12000);
  </script>
</head>
<body ms-controller="test">
  <ul ms-each="array" data-each-rendered="changeArray">
    <li>{{el}}</li>
  </ul>
  <ul ms-with="data" data-with-rendered="changeData" data-with-sorted="keys">
    <li>{{$key}}--{{$val}}</li>
  </ul>
  <ul>
    <li ms-repeat="array2" ms-class="$remove" data-repeat-rendered="deleteArrayEl">{{el}}</li>
  </ul>
</body>
</html>